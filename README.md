# Stranger  
**中国软件杯2015解密陌生人基于百度地图的即时通讯。**  
**第四 届 “ 中 国 软件杯” 大学生软件设计大赛参赛作品，silence团队。**  

**即时通讯服务器采用Openfire二次开发实现**  
# 1.1 开发背景  

    随着陌陌的上市，SoLoMoGlo（Social + Local    + Mobile + Global）概念持续  
发酵，基于移动社交的商业模式层出不穷，相关产品众多。移动社交领域的持续火热，  
让其成为大学生创业的一个重要选择。基于这样的背景，我们要完成一个基于游戏促进  
互动的陌生人社交类移动应用。  
    与微信这类熟人社交软件不同，陌生人交友软件最基本的要求是建立人与人之间的  
关系。然而通过具有趣味的游戏，更能促进人与人之间的社交关系。主要社交场景简述  
如下：用户首先注册个人信息，然后通过摇一摇功能找到附近的陌生人。找到陌生人后  
需要完成一个趣味小游戏完成解锁，然后才能看到该陌生人的信息。接着就可以与该陌  
生人进行语音沟通、图片分享等社交活动。  
  
# 1.2 开发目标  
1.2.1 新用户注册  
     首先用户需要自拍一张照片，然后输入用户昵称、性别等信息，确认后完成注册。  
1.2.2 查找陌生人  
     已注册用户进入查找陌生人功能后，用户通过摇动手机查找距离自己一公里范围内  
的陌生人，然后将这些陌生人昵称作为标记显示在地图上。用户点击某个陌生人进入解  
密游戏环节。
（注：用户摇动手机后App自动将其位置信息公布出去，供其他用户查找。）  
1.2.3 解密游戏  
     用户需完成一个经典有趣的拼图解密游戏后才能看到该陌生人的照片和性别等信息  
。然后用户可将该陌生人加入自己的通讯录，同时系统发送一条推送消息给该陌生人，  
提示谁将其设为联系人，并同时将该用户自动加入到其通讯录中。  
  
1.2.4 通讯录  
     通讯录以列表的方式显示用户的联系人。用户可以在此删除联系人。用户可以点击  
某个联系人进入聊天环节。  
  
1.2.5 与陌生人语音聊天、图片分享  
     在聊天环节，用户可以发送表情，发送语音，或者发送图片功能实现多渠道的社交方式。  
   
# 1.3 参考资料  
  Openfire3.9.3开源框架及其相关文档和Api；  
  Asmack4.0.0及其相关文档和Api；  
  百度地图开放Api及其相关文档；  
  Android4.1Api开发文档；  
  Android4.4Api开发文档；  
  
1.4 设计原则  
    Openfire开源框架采用XMPP即时通讯协议实现，整个底层采用xml进行数据传输和交互，通  
过定义好的xml数据包格式传输相应的命令实现整个服务器的操控和配置。Openfire还制定了一  
套强大的插件机制，使开发者可以自己写一个Openfire的插件来为服务器添加额外的功能。  
    asmack包是XMPP协议提供给Android的开源jar包，内部实现了XMPP协议的基本即时通讯的功  
能，底层和Openfire一样采用格式化的xml进行数据传输，因此，也很容易通过自己编写的格式  
xml数据包来实现额外的功能。  
    只要在服务器和客户端实现相同的接口，便可通过这个XMPP的协议为软件系统添加自己需要  
的功能，软件的可拓展性高，适合二次开发。  
  
# 二、 需求分析  
# 2.1 需求陈述  
2.1.1 新用户注册  
    首先用户需要自拍一张照片，然后输入用户昵称、性别等信息，确认后完成注册。  
2.1.2 查找陌生人  
     已注册用户进入查找陌生人功能后，用户通过摇动手机查找距离自己一公里范围内的陌生人  
，然后将这些陌生人昵称作为标记显示在地图上。用户点击某个陌生人进入解密游戏环节。  
（注：用户摇动手机后App自动将其位置信息公布出去，供其他用户查找。）  
2.1.3 解密游戏  
     用户需完成一个经典有趣的拼图解密游戏后才能看到该陌生人的照片和性别等信息。然后用  
户可将该陌生人加入自己的通讯录，同时系统发送一条推送消息给该陌生人，提示谁将其设为联  
系人，并同时将该用户自动加入到其通讯录中。  
  
2.1.4 通讯录  
    通讯录以列表的方式显示用户的联系人。用户可以在此通过长按删除联系人。用户可以点击某个  
联系人进入聊天环节，可以点击联系人的头像查看联系人的详细信息。  
2.1.5搜索好友  
    可以通过账户名，昵称搜索的方式查找陌生人，并查看信息，添加好友。  
2.1.6 与陌生人语音聊天  
 在聊天界面，用户可以点击语音发送按钮进行语音的录制，并把语音发送给对方。  
2.1.7图片分享  
   在聊天界面，用户可以点击图片发送按钮，选择手机中的图片发送给对方，实现交互的图片分享。  
用户可在聊天界面点击聊天记录中的图片进行图片的全屏观看。  
2.1.8表情发送  
    软件还内嵌了一套表情供用户使用，用户可以在聊天界面通过点击表情发送按钮，调出表情面板  
，选择自己想发送的表情进行发送。  
2.1.9修改自己的详细信息  
    可以通过任意界面内点击自己的头像进入设置界面，对自己的详细信息进行设置修改。  
2.1.10关于软件App设置界面  
    可以对软件的当前账户进行删除，或者设置账户的状态，设置软件的通知栏提醒，声音提醒开关，  
清空App的聊天记录，聊天图片以及缓存，恢复软件的初始设置等操作。  
  
# 2.2运行环境  
  客户端：  
    该App可运行在Android4.0以上的Android系统。  
  服务器端：  
    服务器端理论上可运行在Windows和Linux下，Linux下未经测试，Windows下测试通过。  


